<!DOCTYPE html>
<html lang="en-CA">
<head>
<title>Firmware -dat-ting - Len’s Stuff</title>
<meta name="author" content="Len Popp">
<link rel="license" href="#license">
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1">
<link rel="stylesheet" type="text/css" href="../../css/site.css">
</head>
<body>
<header>
<hgroup>
<a href="/"><img src="/assets/logo.jpg" class="logo" alt="home"></a>
<h1>dat-ting Firmware</h1>
<p>Firmware for the dat-ting module</p>
</hgroup>
<nav>
<!--nav button--><label for="navCheck">&nbsp;</label><input type="checkbox" id="navCheck">
<ul>
<li><a href="#building">Building</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#tools">Tools</a></li>
<li>Back to <a href=".">dat-ting</a></li>
<li><a href="/">Home</a></li>
</ul>
</nav>
</header>

<main>

<aside><img src="firmware.png" alt="source code"></aside>
<p>The <a href="index.html"><em>dat-ting</em> Eurorack module</a> is based on a
<a href="https://electro-smith.com/products/daisy-seed">Daisy Seed</a> microcontroller board.
The microcontroller firmware is open source and is published under the
<a href="https://github.com/Len42/dat-ting/blob/main/firmware/LICENSE">MIT license</a>.
GitHub repository is <a href="https://github.com/Len42/dat-ting">here</a>.</p>

<h1><a name="building"></a>Building the Firmware</h1>

<h2>Setup</h2>
<p>To set up a development environment for Daisy Seed on Windows, Mac, or Linux,
<a href="https://github.com/electro-smith/DaisyWiki/wiki/1.-Setting-Up-Your-Development-Environment">follow these instructions</a>.</p>

<h2>Get the Source Code</h2>
<p>The source code for this module’s firmware is in
<a href="https://github.com/Len42/dat-ting">this GitHub repository</a>.
Clone the repository, including the submodules for the Daisy libraries:</p>
<code>git clone --recurse-submodules https://github.com/Len42/dat-ting.git</code>
<p>Or, if an SSL private key has been configured:</p>
<code>git clone --recurse-submodules git@github.com:Len42/dat-ting.git</code>

<p>In the cloned repository, the firmware code is located in the
<kbd>firmware/src</kbd> sub-directory.</p>

<h2>Compile the Firmware</h2>
If you're using Visual Studio Code for development,
<a href="https://github.com/electro-smith/DaisyWiki/wiki/1.-Setting-Up-Your-Development-Environment#4a-flashing-the-daisy-via-usb">follow these instructions</a>
to compile the firmware and download it to the Daisy Seed via USB.</p>

<h1><a name="overview"></a>Firmware Overview</h1>
<p>The firmware for this module is written in C++ using the Daisy Seed libraries
(<a href="https://github.com/electro-smith/libDaisy">libDaisy</a> and
<a href="https://github.com/electro-smith/DaisySP">DaisySP</a>).
These libraries implement a host of useful DSP algorithms which do most of the actual audio processing.</p>

<p><em>dat-ting</em> is a multi-function module so the firmware is organized around a set of <em>programs.</em> Each program implements a particular function such as VCO or delay.
Audio and CV processing is done by the currently-running program, which implements an audio callback function that is called by libDaisy.</p>

<p>I have implemented several programs so far and I'm adding more as I need them.
Some of the implementations are quite simple and don't have as many adjustable parameters as they could.</p>

<aside><img src="oled-menu.jpg" alt="UI display"></aside>
<p>The firmware also implements a user interface using the OLED display and the rotary encoder knob.
This is used to select which program to run and to set whatever parameters the program requires.
If you like menu-diving, you’ll love this module!</p>

<aside><img src="oled-vco.jpg" alt="animation display"></aside>
<aside><img src="oled-quant.jpg" alt="animation display"></aside>
<p>When the UI is idle, it displays a fun and useful animation that shows what the currently-running program is doing. Each program has its own particular animation.</p>

<p>A simple task scheduler is used to manage the user interface and animation tasks, as well as some other tasks for testing and debugging.</p>

<h1><a name="tools"></a>Tools &amp; Libraries Used</h1>
<ul>
<li>Daisy libraries <em>(Included as submodules in the git repo)</em></li>
    <ul>
    <li><a href="https://github.com/electro-smith/libDaisy">libDaisy</a> 7.1.0</li>
    <li><a href="https://github.com/electro-smith/DaisySP">DaisySP</a> 1.0.0</li>
    </ul>
<li><a href="https://www.gnu.org/software/make/">GNU Make</a> <em>(Included in the
    <a href="https://github.com/electro-smith/DaisyWiki/wiki/1.-Setting-Up-Your-Development-Environment#1-Install-the-Toolchain">Daisy toolchain installer</a>
    for Windows)</em></li>
<li><a href="https://dfu-util.sourceforge.net/">dfu-util</a> <em>(Included in the
    <a href="https://github.com/electro-smith/DaisyWiki/wiki/1.-Setting-Up-Your-Development-Environment#1-Install-the-Toolchain">Daisy toolchain installer</a>
    )</em></li>
<li><a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">GCC for Arm</a> 13.3.1
    <em>(Note: This is a newer version than the one in the toolchain installer)</em></li>
<li><a href="https://www.python.org/">Python</a> 3.12.2</li>
<li><a href="https://www.dcmembers.com/jibsen/download/61/">Dina font</a> 2.92</li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
</ul>

</main>

<footer><g-row><g-col style="width: 110px; vertical-align: middle">
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
<img src="https://i.creativecommons.org/l/by/4.0/88x31.png" alt="Creative Commons Licence"/></a>
</g-col>
<g-col><div id="license">© 2024 Len Popp<br>
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
</div></g-col></g-row></footer>

</body>
</html>
